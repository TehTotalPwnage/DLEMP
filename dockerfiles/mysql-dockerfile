# Dockerfile for MySQL portion of the LEMP stack.
FROM debian:jessie

MAINTAINER tehtotalpwnage "tehtotalpwnage@gmail.com"

# Ignore interaction when installing via APT (needed for MySQL).
ENV DEBIAN_FRONTEND=noninteractive

# Install MySQL.
RUN apt-get update
RUN echo 'mysql-server-5.6 mysql-server/root_password password root' | debconf-set-selections \
    && echo 'mysql-server-5.6 mysql-server/root_password_again password root' | debconf-set-selections \
    && apt-get install -y mysql-server

# Run postinstallation scripts.
RUN /bin/bash -c "/usr/bin/mysqld_safe &" \
    && sleep 5 \
#    && mysqladmin -uroot -proot create app \
#    && mysqladmin -uroot -proot create appdev

# Expose MySQL listening port.
EXPOSE 3306

# Entrypoint and CMD.
ENTRYPOINT ["/bin/bash"]

CMD ["/usr/bin/mysqld_safe"]
